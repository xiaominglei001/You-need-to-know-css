<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS 定位布局详解</title>
    <style>
        /* 基础样式，用于美化页面和示例 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
                Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        h1, h2 {
            color: #005a9c;
            border-bottom: 2px solid #005a9c;
            padding-bottom: 10px;
        }

        .container {
            width: 90%;
            max-width: 900px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .example-box {
            border: 2px dashed #ccc;
            padding: 20px;
            margin-top: 20px;
            position: relative; /* 为 absolute 定位提供参照 */
            height: 250px;
            background-color: #e9f5ff;
        }

        .box {
            width: 100px;
            height: 100px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            border-radius: 5px;
        }

        .static-box { background-color: #3498db; }
        .relative-box { background-color: #e74c3c; position: relative; top: 20px; left: 20px; }
        .absolute-box { background-color: #9b59b6; position: absolute; top: 50px; right: 50px; }
        .fixed-box { background-color: #f1c40f; position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        
        /* Sticky 定位专用样式 */
        .sticky-container {
            height: 300px;
            overflow-y: auto;
            border: 2px solid #1abc9c;
            margin-top: 20px;
        }
        .sticky-header {
            position: sticky;
            top: 0;
            background-color: #1abc9c;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
        .sticky-content {
            padding: 20px;
            height: 500px; /* 使容器可滚动 */
        }

        code {
            padding: 2px 4px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
        }

        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>CSS 定位 (Positioning) 详解</h1>
        <p>CSS 的 <code>position</code> 属性用于指定一个元素的定位类型。通过结合 <code>top</code>, <code>right</code>, <code>bottom</code>, <code>left</code> 和 <code>z-index</code> 属性，我们可以精确地控制元素在页面上的位置。</p>

        <!-- 1. Static 定位 -->
        <section id="static">
            <h2>1. <code>position: static</code> (静态定位)</h2>
            <p>这是所有元素的默认定位方式。静态定位的元素遵循正常的文档流（Normal Flow）。任何 <code>top</code>, <code>right</code>, <code>bottom</code>, <code>left</code> 和 <code>z-index</code> 属性对静态定位的元素都是无效的。</p>
            <div class="example-box">
                <div class="box static-box">Static Box</div>
                <p>这个方块就是静态定位，它会自然地出现在它在 HTML 中的位置。</p>
            </div>
            <pre><code>.static-box {
    position: static; /* 默认值 */
}</code></pre>
        </section>

        <!-- 2. Relative 定位 -->
        <section id="relative">
            <h2>2. <code>position: relative</code> (相对定位)</h2>
            <p>相对定位的元素首先会像静态定位一样，在文档流中占据一个位置。然后，它会根据 <code>top</code>, <code>right</code>, <code>bottom</code>, <code>left</code> 的值，相对于它的 *原始位置* 进行偏移。重要的是，即使元素发生了偏移，它在文档流中占据的原始空间仍然保留，不会被其他元素填充。</p>
            <div class="example-box">
                <div class="box relative-box">Relative Box</div>
                <p>这个红色方块设置了 <code>position: relative; top: 20px; left: 20px;</code>。它从其原始位置向下和向右各偏移了 20px。注意它原来的位置留下了空白。</p>
            </div>
            <pre><code>.relative-box {
    position: relative;
    top: 20px;
    left: 20px;
}</code></pre>
            <p>相对定位的一个重要用途是作为绝对定位元素的“定位上下文”或“包含块”。</p>
        </section>

        <!-- 3. Absolute 定位 -->
        <section id="absolute">
            <h2>3. <code>position: absolute</code> (绝对定位)</h2>
            <p>绝对定位的元素会完全脱离正常的文档流。它的位置是相对于 *最近的非 <code>static</code> 定位的祖先元素* 来确定的。如果找不到这样的祖先元素，它将相对于初始包含块（通常是 <code>&lt;body&gt;</code> 或 <code>&lt;html&gt;</code>）进行定位。</p>
            <p>由于脱离了文档流，绝对定位的元素不会占据空间，其他元素会当它不存在一样。可以使用 <code>z-index</code> 属性来控制其堆叠顺序。</p>
            <div class="example-box">
                <div class="box absolute-box">Absolute Box</div>
                <p>这个紫色方块设置了 <code>position: absolute; top: 50px; right: 50px;</code>。它的位置是相对于外面的虚线框（因为虚线框设置了 <code>position: relative</code>）来计算的。</p>
            </div>
            <pre><code>.example-box {
    position: relative; /* 作为包含块 */
}

.absolute-box {
    position: absolute;
    top: 50px;
    right: 50px;
}</code></pre>
        </section>

        <!-- 4. Fixed 定位 -->
        <section id="fixed">
            <h2>4. <code>position: fixed</code> (固定定位)</h2>
            <p>固定定位与绝对定位类似，也会使元素脱离文档流。但不同的是，固定定位的元素是相对于 *浏览器视口（viewport）* 来定位的，这意味着即使用户滚动页面，它也会固定在屏幕的同一个位置。</p>
            <p>固定定位常用于创建“返回顶部”按钮、固定的导航栏或页脚广告等。</p>
            <div class="example-box">
                 <p>请看页面右下角的黄色方块。当你滚动页面时，它会一直停留在那里。</p>
            </div>
            <div class="box fixed-box">Fixed Box</div>
            <pre><code>.fixed-box {
    position: fixed;
    bottom: 20px;
    right: 20px;
}</code></pre>
        </section>

        <!-- 5. Sticky 定位 -->
        <section id="sticky">
            <h2>5. <code>position: sticky</code> (粘性定位)</h2>
            <p>粘性定位是相对定位和固定定位的混合体。元素在跨越特定阈值前表现为相对定位，跨越后则表现为固定定位。</p>
            <p>这个阈值由 <code>top</code>, <code>right</code>, <code>bottom</code>, <code>left</code> 定义。例如，设置 <code>top: 0;</code> 意味着当元素滚动到距离视口顶部 0px 的位置时，它就会“粘”在那里。</p>
            <p><strong>注意：</strong>粘性定位必须在设置了 <code>overflow</code>（如 <code>scroll</code>, <code>hidden</code>, or <code>auto</code>）的父容器中才能生效。</p>
            <div class="sticky-container">
                <div class="sticky-header">我是粘性头部</div>
                <div class="sticky-content">
                    <p>向下滚动这个区域...</p>
                    <p>你会发现上面的绿色头部在到达顶部后会固定住。</p>
                    <p>继续滚动...</p>
                    <p>...</p>
                    <p>...</p>
                    <p>粘性定位非常适合用于创建表格的固定表头、侧边栏的索引等效果。</p>
                </div>
            </div>
            <pre><code>.sticky-container {
    height: 300px;
    overflow-y: auto; /* 父容器必须可滚动 */
}

.sticky-header {
    position: sticky;
    top: 0; /* 粘性触发点 */
}</code></pre>
        </section>

        <h2>总结</h2>
        <table border="1" cellpadding="5" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>Position 值</th>
                    <th>行为描述</th>
                    <th>是否脱离文档流</th>
                    <th>定位参照物</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>static</code></td>
                    <td>默认值，遵循正常文档流。</td>
                    <td>否</td>
                    <td>无</td>
                </tr>
                <tr>
                    <td><code>relative</code></td>
                    <td>相对于自身原始位置进行偏移，但仍在文档流中占据空间。</td>
                    <td>否</td>
                    <td>自身原始位置</td>
                </tr>
                <tr>
                    <td><code>absolute</code></td>
                    <td>相对于最近的非 <code>static</code> 祖先元素定位。</td>
                    <td>是</td>
                    <td>最近的非 <code>static</code> 祖先</td>
                </tr>
                <tr>
                    <td><code>fixed</code></td>
                    <td>相对于浏览器视口定位，滚动时位置不变。</td>
                    <td>是</td>
                    <td>浏览器视口 (Viewport)</td>
                </tr>
                <tr>
                    <td><code>sticky</code></td>
                    <td>在滚动到特定位置前为 <code>relative</code>，之后变为 <code>fixed</code>。</td>
                    <td>否 (但在粘住时表现类似 fixed)</td>
                    <td>滚动容器 (Scrollport)</td>
                </tr>
            </tbody>
        </table>

    </div>

</body>
</html>